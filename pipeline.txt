{
  "text-embeddings-frompdf-pt": {
    "description": "Text embedding pipeline",
    "processors": [
      {
        "attachment": {
          "field": "data",
          "remove_binary": true
        },
        "inference": {
          "model_id": "rufimelo__bert-large-portuguese-cased-sts",
          "target_field": "text_field",
          "field_map": {
            "attachment.content": "text_field"
          }
        }
      }
    ],
    "on_failure": [
      {
        "set": {
          "description": "Index document to 'failed-<index>'",
          "field": "_index",
          "value": "failed-{{{_index}}}"
        }
      },
      {
        "set": {
          "description": "Set error message",
          "field": "ingest.failure",
          "value": "{{_ingest.on_failure_message}}"
        }
      }
    ]
  }
}
